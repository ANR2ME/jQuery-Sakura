var $sakuraInterval=null;!function(n){n.fn.sakura=function(a){function t(n,a){return Math.floor(Math.random()*(a-n+1))+n}function i(n,a,t){for(var i=0;e>i;i++)o[i]||(a=a.toLowerCase()),n.get(0).addEventListener(o[i]+a,t,!1)}var o=["moz","ms","o","webkit",""],e=o.length,s={blowAnimations:["blow-soft-left","blow-medium-left","blow-hard-left","blow-soft-right","blow-medium-right","blow-hard-right"],className:"sakura",maxSize:14,minSize:9,newOn:300,swayAnimations:["sway-0","sway-1","sway-2","sway-3","sway-4","sway-5","sway-6","sway-7","sway-8"]},a=n.extend({},s,a),r=n(document).height(),m=n(document).width(),l=n('<div class="'+a.className+'" />');n("body").css({"overflow-x":"hidden"});var w=function(){var o=a.blowAnimations[Math.floor(Math.random()*a.blowAnimations.length)],e=a.swayAnimations[Math.floor(Math.random()*a.swayAnimations.length)],s=Math.round(.0088*r)+5*Math.random(),w="fall "+s+"s linear 0s 1, "+o+" "+((s>30?s:30)-20+t(0,20))+"s linear 0s infinite, "+e+" "+t(2,4)+"s linear 0s infinite",d=l.clone(),h=t(a.minSize,a.maxSize),u=Math.random()*m-100,f=-(20*Math.random()+15);i(d,"AnimationEnd",function(){n(this).remove()}),i(d,"AnimationIteration",function(t){-1!=n.inArray(t.animationName,a.blowAnimations)&&n(this).remove()}),d.css({"-webkit-animation":w,"-o-animation":w,"-ms-animation":w,"-moz-animation":w,animation:w,height:h,left:u,"margin-top":f,width:h}).appendTo("body")};n(window).blur(function(){clearInterval($sakuraInterval)}),n(window).focus(function(){$sakuraInterval=setInterval(w,a.newOn)}),n(window).resize(function(){r=n(document).height(),m=n(document).width()}),$sakuraInterval=setInterval(w,a.newOn)}}(jQuery);
